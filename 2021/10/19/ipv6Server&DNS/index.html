<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>ipv6Server&amp;DNS | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content=":one:准备工作1）启用ipv6 vi &#x2F;etc&#x2F;sysctl.conf 1234net.ipv6.conf.all.disable_ipv6 &#x3D; 0net.ipv6.conf.default.disable_ipv6 &#x3D; 0net.ipv6.conf.lo.disable_ipv6 &#x3D; 0net.ipv6.conf.all.forwarding &#x3D; 1">
<meta property="og:type" content="article">
<meta property="og:title" content="ipv6Server&amp;DNS">
<meta property="og:url" content="http://example.com/2021/10/19/ipv6Server&DNS/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content=":one:准备工作1）启用ipv6 vi &#x2F;etc&#x2F;sysctl.conf 1234net.ipv6.conf.all.disable_ipv6 &#x3D; 0net.ipv6.conf.default.disable_ipv6 &#x3D; 0net.ipv6.conf.lo.disable_ipv6 &#x3D; 0net.ipv6.conf.all.forwarding &#x3D; 1">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-10-19T04:58:09.000Z">
<meta property="article:modified_time" content="2021-10-19T04:04:24.423Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="ipv6  DNS">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-ipv6Server&amp;DNS" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/10/19/ipv6Server&DNS/" class="article-date">
  <time datetime="2021-10-19T04:58:09.000Z" itemprop="datePublished">2021-10-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ipv6Server&amp;DNS
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="one-准备工作"><a href="#one-准备工作" class="headerlink" title=":one:准备工作"></a>:one:准备工作</h3><p>1）启用ipv6</p>
<p>vi /etc/sysctl.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">net.ipv6.conf.all.disable_ipv6 &#x3D; 0</span><br><span class="line">net.ipv6.conf.default.disable_ipv6 &#x3D; 0</span><br><span class="line">net.ipv6.conf.lo.disable_ipv6 &#x3D; 0</span><br><span class="line">net.ipv6.conf.all.forwarding &#x3D; 1</span><br></pre></td></tr></table></figure>

<p>vi /etc/sysconfig/network</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NETWORKING_IPV6&#x3D;yes</span><br><span class="line">IPV6FORWARDING&#x3D;yes</span><br><span class="line">HOSTNAME&#x3D;dhcpserver</span><br><span class="line">ONBOOT&#x3D;yes</span><br></pre></td></tr></table></figure>

<p>使配置生效并查看效果</p>
<p><code>sysctl -p</code></p>
<p>2）配置网卡</p>
<p>vi /etc/sysconfig/network-scripts/ifcfg-ens33</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">TYPE&#x3D;Ethernet</span><br><span class="line">PROXY_METHOD&#x3D;none</span><br><span class="line">BROWSER_ONLY&#x3D;no</span><br><span class="line">BOOTPROTO&#x3D;static</span><br><span class="line">DEFROUTE&#x3D;yes</span><br><span class="line">IPV4_FAILURE_FATAL&#x3D;no</span><br><span class="line">IPV6INIT&#x3D;yes</span><br><span class="line">IPV6_AUTOCONF&#x3D;no</span><br><span class="line">IPV6_DEFROUTE&#x3D;yes</span><br><span class="line">IPV6_PEERDNS&#x3D;yes</span><br><span class="line">IPV6_PEERROUTES&#x3D;yes</span><br><span class="line">IPV6_FAILURE_FATAL&#x3D;no</span><br><span class="line">IPV6_ADDR_GEN_MODE&#x3D;stable-privacy</span><br><span class="line">NAME&#x3D;ens33									#改成实际的名称</span><br><span class="line">UUID&#x3D;c99f931f-acbe-4769-99de-63625a57ddba    #改成实际的网卡id，也可以不写</span><br><span class="line">DEVICE&#x3D;ens33                       			#改成实际的名称</span><br><span class="line">ONBOOT&#x3D;yes</span><br><span class="line">#IPADDR&#x3D;x.x.x.x</span><br><span class="line">#GATEWAY&#x3D;x.x.x.x</span><br><span class="line">#NETMASK&#x3D;X.X.X.X</span><br><span class="line">PEERDNS&#x3D;yes</span><br><span class="line">PEERROUTES&#x3D;yes</span><br><span class="line">IPV6ADDR&#x3D;2001:db8:8::1&#x2F;64                   #根据DHCP的情况来写</span><br><span class="line">IPV6_DEFAULTGW&#x3D;2001:db8:8::1000				#根据DHCP的情况来写</span><br><span class="line">IPV6FORWARDING&#x3D;yes</span><br><span class="line">#&#x2F;&#x2F;IPV6 SLAAC configure client</span><br><span class="line">#IPV6_AUTOCONF&#x3D;no</span><br><span class="line">#DHCPV6C&#x3D;yes</span><br></pre></td></tr></table></figure>

<p>重启网络服务</p>
<p><code>systemctl restart network</code></p>
<h3 id="two-radvd"><a href="#two-radvd" class="headerlink" title=":two:radvd"></a>:two:radvd</h3><p>1）安装并配置radvd</p>
<p><code>yum -y install radvd</code></p>
<p>vi /etc/radvd.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">interface ens33      #ens33改成实际的网卡名</span><br><span class="line">&#123;</span><br><span class="line">  AdvSendAdvert on;</span><br><span class="line">  AdvManagedFlag on;</span><br><span class="line">  AdvOtherConfigFlag on;</span><br><span class="line">  MinRtrAdvInterval 30;</span><br><span class="line">  MaxRtrAdvInterval 100;</span><br><span class="line"></span><br><span class="line">  AdvLinkMTU 1480;</span><br><span class="line">#  prefix 2001:db8:8::&#x2F;64</span><br><span class="line">#  &#123;</span><br><span class="line">#    AdvOnLink on;</span><br><span class="line">#    AdvAutonomous on;</span><br><span class="line">#    AdvRouterAddr off;</span><br><span class="line">#  &#125;;</span><br><span class="line">#  RDNSS 2001:db8:8::100</span><br><span class="line">#  &#123;&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>2）启动radvd并自启</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> radvd</span><br><span class="line">systemctl start radvd</span><br></pre></td></tr></table></figure>



<h3 id="three-dhcp"><a href="#three-dhcp" class="headerlink" title=":three:dhcp"></a>:three:dhcp</h3><p>1）安装并配置DHCP</p>
<p><code>yum -y install dhcp</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># vi &#x2F;etc&#x2F;dhcp&#x2F;dhcpd6.conf</span><br><span class="line"> </span><br><span class="line">default-lease-time 2592000;</span><br><span class="line">preferred-lifetime 604800;</span><br><span class="line">option dhcp-renewal-time 3600;</span><br><span class="line">option dhcp-rebinding-time 7200;</span><br><span class="line">allow leasequery;</span><br><span class="line">option dhcp6.name-servers 2001:db8:8::100;</span><br><span class="line">option dhcp6.domain-search &quot;test.example.com&quot;,&quot;example.com&quot;;</span><br><span class="line">option dhcp6.preference 255;</span><br><span class="line">option dhcp6.info-refresh-time 21600;</span><br><span class="line">option dhcp6.rapid-commit;</span><br><span class="line">dhcpv6-lease-file-name &quot;&#x2F;var&#x2F;lib&#x2F;dhcpd&#x2F;dhcpd6.leases&quot;;</span><br><span class="line"># The subnet where the server is attached</span><br><span class="line">subnet6 2001:db8:8::&#x2F;64 &#123; </span><br><span class="line">        #    Range for clients</span><br><span class="line">        range6 2001:db8:8::2 2001:db8:8::10;</span><br><span class="line">        #    Range for clients requesting a temporary address</span><br><span class="line">        #range6 2001:db8:0:1::&#x2F;64 temporary;</span><br><span class="line">        #    Additional options</span><br><span class="line">        #option dhcp6.name-servers fec0:0:0:1::1;</span><br><span class="line">        #option dhcp6.domain-search &quot;domain.example&quot;;</span><br><span class="line">        #     Prefix range for delegation to sub-routers</span><br><span class="line">        prefix6 2201:db8:0:100:: 2201:db8:0:f00:: &#x2F;56;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2）启动并自启HDCP6</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> dhcpd6</span><br><span class="line">systemctl start dhcpd6</span><br></pre></td></tr></table></figure>

<h3 id="four-调整防火墙状态"><a href="#four-调整防火墙状态" class="headerlink" title=":four:调整防火墙状态"></a>:four:调整防火墙状态</h3><p>systemctl stop firewalld.service </p>
<p> 或放行相应的端口</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port=xx/tcp</span><br><span class="line">firewall-cmd --permanent --add-port=xx/udp</span><br><span class="line">firewall-cmd --reload  // 重新加载防火墙配置，让配置生效</span><br></pre></td></tr></table></figure>



<h3 id="five-阶段检测"><a href="#five-阶段检测" class="headerlink" title=":five:阶段检测"></a>:five:阶段检测</h3><p>目前可以测试ipv6地址的可用性</p>
<p>可以用另一台机器ping这台启用了ipv6地址的机器，此时应使用的命令为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Win:  ping -6 2001:db8:8::1</span><br><span class="line">Linux:  ping6   2001:db8:8::1</span><br></pre></td></tr></table></figure>

<p>有web服务还可以curl，格式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl  -g -d -k -v --interface [本机ipv6地址] https://[目标ipv6地址]:端口号/test.html </span><br></pre></td></tr></table></figure>

<h3 id="six-DNS"><a href="#six-DNS" class="headerlink" title=":six:DNS"></a>:six:DNS</h3><p>1）安装 BIND 服务器软件并启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y install <span class="built_in">bind</span> bind-utils</span><br><span class="line">systemctl start named.service  // 启动服务</span><br><span class="line">systemctl <span class="built_in">enable</span> named  // 设为开机启动</span><br></pre></td></tr></table></figure>

<p>2）DNS 服务的相关配置文件</p>
<p><code>cp -p /etc/named.conf /etc/named.conf.bak</code> // 参数-p表示备份文件与源文件的属性一致。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"># vi &#x2F;etc&#x2F;named.conf</span><br><span class="line"></span><br><span class="line">options &#123;</span><br><span class="line">        listen-on port 53 &#123; any; &#125;;         #需要修改的</span><br><span class="line">        listen-on-v6 port 53 &#123; any; &#125;;		#需要修改的</span><br><span class="line">        directory       &quot;&#x2F;var&#x2F;named&quot;;</span><br><span class="line">        dump-file       &quot;&#x2F;var&#x2F;named&#x2F;data&#x2F;cache_dump.db&quot;;</span><br><span class="line">        statistics-file &quot;&#x2F;var&#x2F;named&#x2F;data&#x2F;named_stats.txt&quot;;</span><br><span class="line">        memstatistics-file &quot;&#x2F;var&#x2F;named&#x2F;data&#x2F;named_mem_stats.txt&quot;;</span><br><span class="line">        allow-query     &#123; any; &#125;;			#需要修改的</span><br><span class="line"></span><br><span class="line">   &#x2F;*</span><br><span class="line">         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.</span><br><span class="line">         - If you are building a RECURSIVE (caching) DNS server, you need to enable</span><br><span class="line">           recursion.</span><br><span class="line">         - If your recursive DNS server has a public IP address, you MUST enable access</span><br><span class="line">           control to limit queries to your legitimate users. Failing to do so will</span><br><span class="line">           cause your server to become part of large scale DNS amplification</span><br><span class="line">           attacks. Implementing BCP38 within your network would greatly</span><br><span class="line">           reduce such attack surface</span><br><span class="line">        *&#x2F;</span><br><span class="line">        recursion yes;</span><br><span class="line"></span><br><span class="line">        dnssec-enable yes;</span><br><span class="line">        dnssec-validation yes;</span><br><span class="line"></span><br><span class="line">        &#x2F;* Path to ISC DLV key *&#x2F;</span><br><span class="line">        bindkeys-file &quot;&#x2F;etc&#x2F;named.iscdlv.key&quot;;</span><br><span class="line"></span><br><span class="line">        managed-keys-directory &quot;&#x2F;var&#x2F;named&#x2F;dynamic&quot;;</span><br><span class="line"></span><br><span class="line">        pid-file &quot;&#x2F;run&#x2F;named&#x2F;named.pid&quot;;</span><br><span class="line">        session-keyfile &quot;&#x2F;run&#x2F;named&#x2F;session.key&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">include &quot;&#x2F;etc&#x2F;named.rfc1912.zones&quot;;      # 在这里配置要解析的域</span><br></pre></td></tr></table></figure>

<p><code>named-checkconf </code>    # 检查named.conf是否有语法问题</p>
<p>3）配置要解析的域</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#  vi &#x2F;etc&#x2F;named.rfc1912.zones</span><br><span class="line"></span><br><span class="line">zone &quot;reading.zt&quot; IN &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;named.reading.zt&quot;;     #针对域的具体配置文件，放在&#x2F;var&#x2F;named目录中</span><br><span class="line">        allow-update &#123; none; &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>4）每个域的配置文件</p>
<p>基于 name.localhost 模板，创建配置文件：<code>cp -p /var/named/named.localhost /var/named/named.reading.zt</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$TTL 1D</span><br><span class="line">@   IN SOA  @ rname.invalid. (       #域名    TTL   SOA    解析的域名     邮箱</span><br><span class="line">                    0   ; serial</span><br><span class="line">                    1D  ; refresh</span><br><span class="line">                    1H  ; retry</span><br><span class="line">                    1W  ; expire</span><br><span class="line">                    3H )    ; minimum</span><br><span class="line">    NS  @</span><br><span class="line">    A   127.0.0.1</span><br><span class="line">    AAAA    ::1</span><br><span class="line">mirror  A   192.168.0.233</span><br><span class="line">test    A   192.168.0.232</span><br></pre></td></tr></table></figure>

<p>改为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$TTL 1D</span><br><span class="line">@       IN SOA  master.reading.zt.  admin.reading.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ;  minimum</span><br><span class="line">        NS      master</span><br><span class="line">master A 192.168.1.51</span><br><span class="line">ftp    A  1.1.1.1</span><br><span class="line">www    AAAA  2001:db8:8::1</span><br><span class="line">&#x2F;** </span><br><span class="line">* 也可以使用 www CNAME  xxx.reading.zt     </span><br><span class="line">* xxx.reading.zt   A 192.168.1.x</span><br><span class="line">* 来实现多种绑定方式</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure>

<p>4）修改权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown :named /var/named/named.reading.zt</span><br></pre></td></tr></table></figure>

<p>5） 测试域的语法有没有错误</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">named-checkzone <span class="string">&quot;reading.zt&quot;</span> <span class="string">&quot;/var/named/named.reading.zt&quot;</span></span><br></pre></td></tr></table></figure>

<p>6）重启 named 服务，让配置生效 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart named</span><br></pre></td></tr></table></figure>

<p>7）把网卡配置文件中添加新搭建的DNS服务器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DNS1&#x3D;192.168.1.123    #举例</span><br></pre></td></tr></table></figure>

<p>8）重启网卡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network.service</span><br></pre></td></tr></table></figure>

<h3 id="seven-DNS测试"><a href="#seven-DNS测试" class="headerlink" title=":seven:DNS测试"></a>:seven:DNS测试</h3><p>如curl  域名， host 域名  ，dig 域名等</p>
<ul>
<li>ethtool</li>
<li>mii-tool  检测网线是否连接</li>
<li>route -n</li>
<li>host 域名 [dns]</li>
<li>dig  域名</li>
<li>dig  NS  域名</li>
<li>dig -t  mx  域名  @[dns]   #查询域名的邮箱</li>
</ul>
<h3 id="eight-故障排查"><a href="#eight-故障排查" class="headerlink" title=":eight:故障排查"></a>:eight:故障排查</h3><p>思路：ipv4通 -&gt; ipv6通 -&gt; 域名通</p>
<p>if   ipv6不通 :</p>
<p>​    排查ipv6服务的搭建情况，要注意配置pv6地址每台机器都需要配置允许ipv6才行</p>
<p>if    ipv6通    且  域名不通:</p>
<p>​    排查named服务器是否有错误</p>
<p>​    还有一个坑是<code>/etc/resolve</code>文件会自动被NetworkManager修改，网上有两种办法，我采用的是停止NetworkManager的进程，然后再手动添加<code>nameserver 192.168.1.xx &gt; /etc/resolv.conf</code>  </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/10/19/ipv6Server&DNS/" data-id="ckuxkbrss000hrwv25stad7hq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ipv6-DNS/" rel="tag">ipv6  DNS</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2019/11/23/k8s%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">k8s搭建</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker-api-php-registry/" rel="tag">docker-api,php,registry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/information-collect/" rel="tag">information collect</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ipv6-DNS/" rel="tag">ipv6  DNS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux%E5%91%BD%E4%BB%A4%E4%B9%8B%E6%9F%A5%E6%89%BE/" rel="tag">linux命令之查找</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python-%E6%89%AB%E6%8F%8F/" rel="tag">python 扫描</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis%E6%BC%8F%E6%B4%9E-%E4%B8%80%E8%88%AC%E5%86%85%E7%BD%91%EF%BC%89/" rel="tag">redis漏洞(一般内网）</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell-%E8%84%9A%E6%9C%AC-Linux-search/" rel="tag">shell 脚本 Linux search</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell%E5%8F%8D%E5%BC%B9%E3%80%81powershell%E5%8F%8D%E5%BC%B9/" rel="tag">shell反弹、powershell反弹</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql-inject/" rel="tag">sql_inject</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql%E6%B3%A8%E5%85%A5/" rel="tag">sql注入</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql%E6%B3%A8%E5%85%A5%E6%B5%81%E7%A8%8B/" rel="tag">sql注入流程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows-%E5%9F%9F-%E5%9F%9F%E6%B8%97%E9%80%8F/" rel="tag">windows 域 域渗透</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E7%BD%91-%E6%8F%90%E6%9D%83/" rel="tag">内网/提权</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E7%BD%91%E8%BD%AC%E5%8F%91/" rel="tag">内网转发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E5%8F%8A%E4%BD%BF%E7%94%A8/" rel="tag">常用工具及使用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" rel="tag">文件上传</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/" rel="tag">文件包含漏洞</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%87waf/" rel="tag">过waf</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/docker-api-php-registry/" style="font-size: 10px;">docker-api,php,registry</a> <a href="/tags/information-collect/" style="font-size: 10px;">information collect</a> <a href="/tags/ipv6-DNS/" style="font-size: 10px;">ipv6  DNS</a> <a href="/tags/k8s/" style="font-size: 10px;">k8s</a> <a href="/tags/linux%E5%91%BD%E4%BB%A4%E4%B9%8B%E6%9F%A5%E6%89%BE/" style="font-size: 10px;">linux命令之查找</a> <a href="/tags/python-%E6%89%AB%E6%8F%8F/" style="font-size: 10px;">python 扫描</a> <a href="/tags/redis%E6%BC%8F%E6%B4%9E-%E4%B8%80%E8%88%AC%E5%86%85%E7%BD%91%EF%BC%89/" style="font-size: 10px;">redis漏洞(一般内网）</a> <a href="/tags/shell-%E8%84%9A%E6%9C%AC-Linux-search/" style="font-size: 10px;">shell 脚本 Linux search</a> <a href="/tags/shell%E5%8F%8D%E5%BC%B9%E3%80%81powershell%E5%8F%8D%E5%BC%B9/" style="font-size: 10px;">shell反弹、powershell反弹</a> <a href="/tags/sql-inject/" style="font-size: 10px;">sql_inject</a> <a href="/tags/sql%E6%B3%A8%E5%85%A5/" style="font-size: 10px;">sql注入</a> <a href="/tags/sql%E6%B3%A8%E5%85%A5%E6%B5%81%E7%A8%8B/" style="font-size: 10px;">sql注入流程</a> <a href="/tags/windows-%E5%9F%9F-%E5%9F%9F%E6%B8%97%E9%80%8F/" style="font-size: 10px;">windows 域 域渗透</a> <a href="/tags/%E5%86%85%E7%BD%91-%E6%8F%90%E6%9D%83/" style="font-size: 10px;">内网/提权</a> <a href="/tags/%E5%86%85%E7%BD%91%E8%BD%AC%E5%8F%91/" style="font-size: 10px;">内网转发</a> <a href="/tags/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E5%8F%8A%E4%BD%BF%E7%94%A8/" style="font-size: 10px;">常用工具及使用</a> <a href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" style="font-size: 10px;">文件上传</a> <a href="/tags/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/" style="font-size: 10px;">文件包含漏洞</a> <a href="/tags/%E8%BF%87waf/" style="font-size: 10px;">过waf</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/10/19/ipv6Server&DNS/">ipv6Server&amp;DNS</a>
          </li>
        
          <li>
            <a href="/2019/11/23/k8s%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">k8s搭建</a>
          </li>
        
          <li>
            <a href="/2019/03/31/python%E6%89%B9%E9%87%8F%E7%88%AC%E5%8F%96URL%E9%85%8D%E5%90%88AWVS/">python批量爬取URL配合AWVS</a>
          </li>
        
          <li>
            <a href="/2019/03/24/first-shell/">first shell</a>
          </li>
        
          <li>
            <a href="/2019/03/24/docker-api/">php与docker-api与私有仓库</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>